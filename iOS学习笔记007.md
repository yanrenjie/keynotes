# 版本管理
### SVN的使用
项目经理对项目进行初始化工作（比方说，仓库有Code和Doc 两个文件夹）
##### 1、 创建文件
```objc
1、项目经理需要连接远程服务器的SVN仓库，把仓库下载到自己的电脑上
svn checkout https://192.168.181.145/svn/project/ --username=jackey --password=jackey
注意 .svn 隐藏文件夹就是SVN的版本文件夹

2、切换到code路径中，创建Main.m文件
touch Main.m

3、查看本地仓库的状态
svn status
? 表示该文件没有被SVN管理

4、把新创建的文件添加到SVN的管理者, 然后查看文件的状态
svn add Main.m
svn status
A 表示该文件被添加到SVN

5、把本地仓库的更改（包含创建的文件）提交到远程仓库
svn commit -m"创建了Main.m文件"。 //这里是添加的提交文件的注释，为什么提交这次代码，每次提交都要添加注释

6、终端中直接向文件添加内容，修改文件,并查看文件的状态
echo "Main.m文件将被修改" > Main.m
svn status
M 表示该文件被修改

7、把本地的更改提交到远程的服务器
svn commit -m"修改了Main.m文件，添加了内容"

```

##### 2、删除文件
```objc
1、项目经理删除Main.m文件，并查看状态
svn remove Main.m
svn status
D表示该文件已经被删除

2、把本地的更改（删除文件）提交到远程的服务器
svn commit -m"删除了文件" Main.m
```

##### 注意，提交的时候，后面可以跟具体的文件，也可以不跟，跟具体文件，表示只提交该文件，不跟具体文件，表示要将所有的更改的文件都进行提交操作

##### 3、SVN相关命令的简写
```objc
checkout  			--> co
status     			--> st
commit    			--> ci
remove.   			--> rm
update.    			--> up
```

##### 4、查看版本信息
```objc
1、首先要更新获取最新的仓库的信息
svn update 

2、查看仓库的版本信息
svn log
```

##### 5、新同事张三加入公司开发涉及操作
```objc
1、张三加入公司开发，分配SVN账号，账号==秘密==zhangsan,并设置权限

2、张三连接到远程的服务器，把仓库下载到本地
svn checkout https://192.168.181.145/svn/project/ --username=zhangsan --password= zhangsan

3、张三切换到Code目录下，创建Dog.h Dog.m文件
// 先切换目录
touch Dog.h Dog.m

4、查看文件的状态（？注意新创建的文件默认是不会被SVN管理的）
svn status

5、把新创建的文件纳入到SVN管理当中
svn add Dog.h Dog.m 或者
svn add * （表示把当前的文件路径中的所有的文件都添到SVN版本库中）

6、把本地的更改提交到远程的仓库（这里可以不写具体的文件名称）
svn commit -m "创建了狗类" Dog.h Dog.m

7、其他同事更新获取新代码
svn update

8、以此内推
```

##### 6、多人开发的时候可能会产生冲突
```objc
场景：
1、假设项目经理往Dog.h文件中修改了内容，并把修改提交到远程的仓库
svn commit -m "项目经理修改了第二行，写了我是项目经理这个字符串" Dog.h

2、然后张三并没有及时更新代码，然后修改了同一个地方的内容并提交
svn commit -m "我是张三修改了第二行，写了我是张三这个字符串" Dog.h

会产生一个错误 ==error== is out of date 该文件已过期：当前的版本低于服务器的版本，无法提交成功

3、张三需要先更新获取最新的仓库信息
svn update  // 但是这个操作会产生冲突，因为服务器的代码和本地的自己的代码不一致

比方说Dog.h文件的内容如下
hello Dog
+<<<<<<<<<< .mine
+你好，我是张三！
+=========
+你好，我是项目经理
+>>>>>>>>>> .r10
Select: (p)postpone, (df)diff-full, (e)edit, (r)resolved,
	     (mc)mine-conflict, (tc)-theirs-conflict,
	     (s)show all options:mc

.mine 表示是我的内容， .r10表示的是服务器当前的版本内容
(p)postpone: 表示稍后处理
(mc)mine-conflict:表示以我的为准，用我的数据覆盖服务器的数据
(tc)theirs-conflict：表示以他们的为准， 用服务器的数据覆盖我的数

选择p:手动解决冲突的步骤
1、打开有冲突的文件，把冲突解决（删除特殊字符）
2、通过命令行告诉SVN已经手动的把冲突解决了：svn resolved Dog.h
3、把更改提交到远程仓库： svn commit -m "更改了冲突，使用p解决的" Dog.h
```


##### 7、版本的回退（revert｜merge）（回退与合并操作）
```objc
版本的回退的两种情况
1、本地的代码做了更改，该操作还没有提交到远程仓库，取消更改
svn revert Dog.h

2、本地的代码做了修改，该修改已经被提交到了远程仓库，回退到上一个版本
	2.1、回到指定的版本 svn update -r版本号
	eg:svn update -r10
	
	2.2、版本回退
		2.2.1、先更新获得最新的版本
		svn update
		2.2.2、用指定的版本的内容来覆盖当前的版本的内容
		svn merge -r15:r14 Dog.h	 // 表示使用第14个版本的Dog.h文件的内容来覆盖第15个版本的内容
		2.2.3、还需要把更改提交到远程仓库
		svn commit -m "Dog.h文件要回腿到上一个版本"

```

